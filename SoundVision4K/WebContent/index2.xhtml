<!DOCTYPE html >
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/templates/Nav.xhtml">
	<ui:param name="tituloPagina" value="Reserva" />
	<body>
		<ui:define name="contenido">
			<div class="container">
				<h:form>
					


					<!-- Modal Structure -->
					<div id="modal1" class="modal">
						<div class="modal-content">
							<h4>Formulario de reserva</h4>
							<p>Motivo de la reserva</p>
							<textarea jsf:value="#{ingresoBean.motivo}"></textarea>

							<p>
								Hora salida <input type="text" class="timepicker"
									jsf:value="#{ingresoBean.horaSalida}"></input>
							</p>
						</div>
						<div class="modal-footer">
							<a jsf:actionListener="#{ingresoBean.reservar}"
								jsf:value="Reservar"
								class="waves-effect waves-light btn modal-trigger"></a> 
								<a href="index.jsf" class="modal-action modal-close boton1">Cancelar</a>
							
						</div>
					</div>

					<div id="modal2" class="s12 modal">
						<div class="modal-content">
							<p jsf:value="#{ingresoBean.mensaje}"></p>
							<a class="btn" href="index2.jsf" >Ok</a>
						</div>
					</div>

					<div class="col s12 " jsf:rendered="#{not ingresoBean.mesaAyuda}">
						<p class="texto3" >Seleccione la hora o busquela en el
							cronograma.</p>
					</div>

					<div class="col s12 " jsf:rendered="#{not ingresoBean.mesaAyuda}">
						<p class="texto4" >
							Hora <input type="text" class="timepicker"
								jsf:value="#{ingresoBean.horaEntrada}"></input>
						</p>
					</div>

					<div class="col s12 " jsf:rendered="#{not ingresoBean.mesaAyuda}">
						<a class="btn modal-trigger " href="#modal1">Reservar</a>
					</div>
					<div>
						<h:outputText value="#{ingresoBean.mensaje}" />
					</div>
					
					<div class="col s12">



						<h:dataTable value="#{ingresoBean.cronograma}" var="datos">
							<h:column>
								<f:facet name="header">Hora</f:facet>
									#{datos.hora}
							</h:column>
							<h:column>
								<f:facet name="header">Disponibilidad</f:facet>
									#{datos.disponibilidad}
							</h:column>
							<h:column>
								<f:facet name="header">Acci√≥n</f:facet>
								<div jsf:rendered="#{not ingresoBean.mesaAyuda}"><a jsf:rendered="#{datos.accion.equals('Reservar')}"
									jsf:actionListener="#{ingresoBean.accionCronogramaReserva(datos.hora)}"
									href="#modal1" class="modal-trigger">Reservar</a></div>
								<h:commandLink rendered="#{datos.accion.equals('Detalles')}"
									actionListener="#{ingresoBean.accionCronogramaDetalles(datos.reserva)}"
									action="#modal2" class="modal-trigger">
									Detalles</h:commandLink>
									<br/>
								<div jsf:rendered="#{not datos.accion.equals('Reservar')}">
								<h:commandLink  value="Eliminar y reservar" action="#{ingresoBean.accionCronogramaEliminarYReservar(datos.hora)}" rendered="#{ingresoBean.mesaAyuda}" /> 
								</div>
								<div jsf:rendered="#{datos.accion.equals('Reservar')}">
								<h:commandLink  value="Reservar" action="#{ingresoBean.accionCronogramaEliminarYReservar(datos.hora)}" rendered="#{ingresoBean.mesaAyuda}" > 
								</h:commandLink>
								</div>
								
							</h:column>
						</h:dataTable>

					</div>
				</h:form>
			</div>
			<script type="text/javascript" src="resources/js/jquery.js" />
			<script type="text/javascript" src="resources/js/materialize.js" />


			<script type="text/javascript">

		$('.timepicker').pickatime({
	    default: 'now', // Set default time: 'now', '1:30AM', '16:30'
	    fromnow: 0,       // set default time to * milliseconds from now (using with default = 'now')
	    twelvehour: true, // Use AM/PM or 24-hour format
	    donetext: 'OK', // text for done-button
	    cleartext: 'Clear', // text for clear-button
	    canceltext: 'Cancel', // Text for cancel-button
	    autoclose: false, // automatic close timepicker
	    ampmclickable: true, // make AM PM clickable
	    aftershow: function(){} //Function for after opening timepicker
	    });


		 $(document).ready(function(){
		    // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
		    $('.modal').modal();
		  });
		 
		 $(document).ready(function() {
			    $('select').material_select();
			  });
	</script>
		</ui:define>
	</body>
</ui:composition>